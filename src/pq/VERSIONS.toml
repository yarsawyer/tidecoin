schema_version = 1
manifest_updated_on = "2026-02-19"

[upstream]
pqclean_repo = "https://github.com/PQClean/PQClean"
default_upstream_commit = "3730b32aa50ba9e712592c1476bdd048f5f6ed7e"

[settings]
ignored_upstream_files = ["Makefile", "Makefile.Microsoft_nmake"]

[[patches]]
id = "falcon-512-local-adaptations"
patch_file = "src/pq/patches/falcon-512-local-adaptations.patch"
summary = "Tidecoin integration adaptations for Falcon-512 clean implementation."
reason = "Expose deterministic keygen, route RNG/fips202 includes to Tidecoin-local adapters, and keep local verification behavior."
owner = "Tidecoin developers"
consensus_impact = "indirect"
files = [
  "src/pq/falcon-512/api.h",
  "src/pq/falcon-512/inner.h",
  "src/pq/falcon-512/pqclean.c",
]

[[patches]]
id = "falcon-1024-local-adaptations"
patch_file = "src/pq/patches/falcon-1024-local-adaptations.patch"
summary = "Tidecoin integration adaptations for Falcon-1024 clean implementation."
reason = "Expose deterministic keygen and route RNG/fips202 includes to Tidecoin-local adapters."
owner = "Tidecoin developers"
consensus_impact = "indirect"
files = [
  "src/pq/falcon-1024/api.h",
  "src/pq/falcon-1024/inner.h",
  "src/pq/falcon-1024/pqclean.c",
]

[[patches]]
id = "ml-dsa-44-local-adaptations"
patch_file = "src/pq/patches/ml-dsa-44-local-adaptations.patch"
summary = "Tidecoin integration adaptations for ML-DSA-44 clean implementation."
reason = "Expose deterministic keygen API and route RNG include to Tidecoin adapter."
owner = "Tidecoin developers"
consensus_impact = "indirect"
files = [
  "src/pq/ml-dsa-44/api.h",
  "src/pq/ml-dsa-44/sign.c",
]

[[patches]]
id = "ml-dsa-65-local-adaptations"
patch_file = "src/pq/patches/ml-dsa-65-local-adaptations.patch"
summary = "Tidecoin integration adaptations for ML-DSA-65 clean implementation."
reason = "Expose deterministic keygen API and route RNG include to Tidecoin adapter."
owner = "Tidecoin developers"
consensus_impact = "indirect"
files = [
  "src/pq/ml-dsa-65/api.h",
  "src/pq/ml-dsa-65/sign.c",
]

[[patches]]
id = "ml-dsa-87-local-adaptations"
patch_file = "src/pq/patches/ml-dsa-87-local-adaptations.patch"
summary = "Tidecoin integration adaptations for ML-DSA-87 clean implementation."
reason = "Expose deterministic keygen API and route RNG include to Tidecoin adapter."
owner = "Tidecoin developers"
consensus_impact = "indirect"
files = [
  "src/pq/ml-dsa-87/api.h",
  "src/pq/ml-dsa-87/sign.c",
]

[[patches]]
id = "ml-kem-512-local-adaptations"
patch_file = "src/pq/patches/ml-kem-512-local-adaptations.patch"
summary = "Tidecoin integration adaptations for ML-KEM-512 clean implementation."
reason = "Route includes to Tidecoin-local adapters and expose C++-safe declarations used by local transport wrappers."
owner = "Tidecoin developers"
consensus_impact = "indirect"
files = [
  "src/pq/ml-kem-512/api.h",
  "src/pq/ml-kem-512/indcpa.c",
  "src/pq/ml-kem-512/kem.c",
  "src/pq/ml-kem-512/kem.h",
  "src/pq/ml-kem-512/verify.c",
]

[[components]]
name = "shared-fips202"
kind = "shared"
status = "pristine"
local_path = "src/pq"
upstream_path = "common"
include_files = ["fips202.c", "fips202.h"]
upstream_commit = "3730b32aa50ba9e712592c1476bdd048f5f6ed7e"
import_commit = "11d6245a25b4b5e4cf519937a582e9e86cac6f26"
local_patch_set = []
notes = "Shared PQClean SHAKE/FIPS202 primitives used by vendored PQ components."

[[components]]
name = "falcon-512"
kind = "crypto_sign"
status = "patched"
local_path = "src/pq/falcon-512"
upstream_path = "crypto_sign/falcon-512/clean"
upstream_commit = "3730b32aa50ba9e712592c1476bdd048f5f6ed7e"
import_commit = "11d6245a25b4b5e4cf519937a582e9e86cac6f26"
local_patch_set = ["falcon-512-local-adaptations"]
notes = "Vendored PQClean Falcon-512 clean implementation with Tidecoin integration deltas."

[[components]]
name = "falcon-1024"
kind = "crypto_sign"
status = "patched"
local_path = "src/pq/falcon-1024"
upstream_path = "crypto_sign/falcon-1024/clean"
upstream_commit = "3730b32aa50ba9e712592c1476bdd048f5f6ed7e"
import_commit = "11d6245a25b4b5e4cf519937a582e9e86cac6f26"
local_patch_set = ["falcon-1024-local-adaptations"]
notes = "Vendored PQClean Falcon-1024 clean implementation with Tidecoin integration deltas."

[[components]]
name = "ml-dsa-44"
kind = "crypto_sign"
status = "patched"
local_path = "src/pq/ml-dsa-44"
upstream_path = "crypto_sign/ml-dsa-44/clean"
upstream_commit = "3730b32aa50ba9e712592c1476bdd048f5f6ed7e"
import_commit = "11d6245a25b4b5e4cf519937a582e9e86cac6f26"
local_patch_set = ["ml-dsa-44-local-adaptations"]
notes = "Vendored PQClean ML-DSA-44 clean implementation with Tidecoin integration deltas."

[[components]]
name = "ml-dsa-65"
kind = "crypto_sign"
status = "patched"
local_path = "src/pq/ml-dsa-65"
upstream_path = "crypto_sign/ml-dsa-65/clean"
upstream_commit = "3730b32aa50ba9e712592c1476bdd048f5f6ed7e"
import_commit = "11d6245a25b4b5e4cf519937a582e9e86cac6f26"
local_patch_set = ["ml-dsa-65-local-adaptations"]
notes = "Vendored PQClean ML-DSA-65 clean implementation with Tidecoin integration deltas."

[[components]]
name = "ml-dsa-87"
kind = "crypto_sign"
status = "patched"
local_path = "src/pq/ml-dsa-87"
upstream_path = "crypto_sign/ml-dsa-87/clean"
upstream_commit = "3730b32aa50ba9e712592c1476bdd048f5f6ed7e"
import_commit = "11d6245a25b4b5e4cf519937a582e9e86cac6f26"
local_patch_set = ["ml-dsa-87-local-adaptations"]
notes = "Vendored PQClean ML-DSA-87 clean implementation with Tidecoin integration deltas."

[[components]]
name = "ml-kem-512"
kind = "crypto_kem"
status = "patched"
local_path = "src/pq/ml-kem-512"
upstream_path = "crypto_kem/ml-kem-512/clean"
upstream_commit = "3730b32aa50ba9e712592c1476bdd048f5f6ed7e"
import_commit = "11d6245a25b4b5e4cf519937a582e9e86cac6f26"
local_patch_set = ["ml-kem-512-local-adaptations"]
notes = "Vendored PQClean ML-KEM-512 clean implementation with Tidecoin integration deltas."

[[native_adapters]]
name = "pq-randombytes-adapter"
local_paths = [
  "src/pq/randombytes.h",
  "src/pq/randombytes.cpp",
]
notes = "Tidecoin-native RNG bridge consumed by vendored PQ code. Not treated as a vendor component."
